webpackJsonp([13],{"UP+S":function(s,e){},W1Q4:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("mvHQ"),o=t.n(a),n=t("A0hB"),i={data:function(){return{loading:!0,subListtype:!1,tips_data:[],tiptype:[!1],pop_type:0,edit_son:null,tips:!0,sonset_head:[this.$t("m.sonset.key3"),this.$t("m.sonset.key14"),this.$t("m.sonset.key4"),this.$t("m.sonset.key5"),this.$t("m.sonset.key6"),""],sonset_inp:this.$t("m.sonset.key16"),sonset_inp_0:this.$t("m.sonset.key17"),sonset_inp_1:this.$t("m.sonset.key11"),sonset_inp_2:this.$t("m.sonset.key13"),sonset_list:[],item_index:"",subList_params:{username:localStorage.getItem("username"),token:localStorage.getItem("token"),subusername:localStorage.getItem("subusername"),address:""},add_sons:{username:localStorage.getItem("username"),subusername:"",token:localStorage.getItem("token"),address:""},setGoogleAuth:"",setPaymentCode:"",delete_params:{subusername:localStorage.getItem("subusername"),username:localStorage.getItem("username"),token:localStorage.getItem("token"),code:"",paypassword:""},address_paramgs:{subusername:localStorage.getItem("subusername"),username:localStorage.getItem("username"),token:localStorage.getItem("token"),code:"",paypassword:"",address:""},delete_tips:"",testdata:{code:200,msg:"success",subList:[{name:"",address:"",workerNumber:"",createTime:""}]},timer:null}},created:function(){this.get_sonlist(),this.add_sons.username=localStorage.getItem("subusername"),this.setGoogleAuth=JSON.parse(localStorage.getItem("personal_msg")).setGoogleAuth,this.setPaymentCode=JSON.parse(localStorage.getItem("personal_msg")).setPaymentCode;var s=this;(null==localStorage.getItem("subnameList")||localStorage.getItem("subnameList")<1)&&(this.subListtype=!0),this.timer=setInterval(function(){s.get_sonlist()},3e5)},methods:{add_son:function(){this.pop_type=1},cancel_edit:function(){this.edit_son=null,this.add_sons.address=""},remove:function(){this.pop_type=0,this.edit_son=null,this.add_sons.address="",this.add_sons.subusername="",this.subList_params.address="",this.delete_params.paypassword="",this.delete_params.code="",this.address_paramgs.paypassword="",this.address_paramgs.code=""},get_sonlist:function(){var s=this;this.$ajax("post",this.GLOBAL.baseUrl+"v2/accountSubList",this.subList_params,function(e){1102==JSON.parse(e).code&&(s.$message.error(s.$t("m.account.key2")),s.setCookie("token",null),s.setCookie("username",null),localStorage.removeItem("token"),localStorage.removeItem("isLogin"),localStorage.removeItem("username"),localStorage.removeItem("change"),localStorage.removeItem("subusername"),s.$router.push({name:"login",query:{isLogin:!1}})),s.loading=!1,console.log(e,"子账户管理页面"),s.sonset_list=JSON.parse(e).subList},function(s){console.log(s)})},delete_son:function(s){var e=this;this.delete_tips="",this.$set(e.tiptype,0,!1),""!=this.delete_params.paypassword?""!=this.delete_params.code?(this.pop_type=0,this.delete_params.subusername=this.sonset_list[this.item_index].name,this.delete_params.token=Object(n.a)("token"),this.$ajax("post",this.GLOBAL.baseUrl+"v2/deleteAccountSub",this.delete_params,function(s){if(e.delete_params.paypassword="",e.delete_params.code="",1001!=JSON.parse(s).code)return 1002==JSON.parse(s).code?(console.log(JSON.parse(s).code,5555),e.address_paramgs.address="",void e.$message.error(e.$t("m.account.key100"))):void(1003!=JSON.parse(s).code?1004!=JSON.parse(s).code?1005!=JSON.parse(s).code?200===JSON.parse(s).code?(e.sonset_list.length<=1&&(localStorage.setItem("change","***"),localStorage.removeItem("subnameList")),localStorage.removeItem("subusername"),e.$message.success(e.$t("m.account.key95")),e.get_sonlist(),e.sonset_list.splice(e.item_index,1),e.$parent.$children[0].getsubusername()):e.$message.error(e.$t("m.account.key98")):e.$message.error(e.$t("m.wallet.key38")):e.$message.error(e.$t("m.wallet.key34")):e.$message.error(e.$t("m.sonset.key13"),e.$t("m.sonset.key11")));e.$message.error(e.$t("m.noson.key3"))},function(s){console.log(s),e.$message.error(e.$t("m.account.key87"))})):this.delete_tips=this.$t("m.setting.key57"):this.delete_tips=this.$t("m.setting.key69")},delete_item:function(s){0!=this.setPaymentCode?(this.item_index=s,this.pop_type=2):this.$message.error(this.$t("m.wallet.key43"))},edit_sons:function(s){if(0!=this.setPaymentCode){this.address_paramgs.address="",this.edit_son=s,this.item_index=s}else this.$message.error(this.$t("m.wallet.key43"))},address_edit:function(){return console.log(),0!==this.address_paramgs.address.indexOf("0x")||42!==this.address_paramgs.address.length?(this.$message.error(this.$t("m.account.key88")),void(this.address_paramgs.address="")):this.verifyUsername2(this.address_paramgs.address)?void(this.pop_type=3):(this.address_paramgs.address="",this.$message.error(this.$t("m.account.key88")))},get_edit:function(){var s=this;if(this.pop_type=0,0!==s.address_paramgs.address.indexOf("0x")||42!==s.address_paramgs.address.length)return s.$message.error(s.$t("m.account.key88")),void(s.address_paramgs.address="");this.$set(s.tiptype,0,!1),this.address_paramgs.token=Object(n.a)("token"),this.address_paramgs.subusername=s.sonset_list[this.item_index].name,this.address_paramgs.username=localStorage.getItem("username"),console.log(s.add_sons),this.$ajax("post",this.GLOBAL.baseUrl+"v2/addressForAccountSub",this.address_paramgs,function(e){if(console.log(e),s.address_paramgs.paypassword="",s.address_paramgs.code="",console.log(JSON.parse(e).code),1001!=JSON.parse(e).code){if(1002==JSON.parse(e).code)return s.address_paramgs.address="",void s.$message.error(s.$t("m.account.key100"));if(1003==JSON.parse(e).code)return console.log(JSON.parse(e).code,5555),s.address_paramgs.address="",void s.$message.error(s.$t("m.sonset.key13"),s.$t("m.sonset.key11"));if(1004!=JSON.parse(e).code)if(1005!=JSON.parse(e).code)if(1006!=JSON.parse(e).code){if(200!==JSON.parse(e).code)return s.address_paramgs.address="",void s.$message.error(s.$t("m.account.key100"));s.$message.success(s.$t("m.account.key99")),s.$set(s.tiptype,0,!0),s.edit_son=-1,s.get_sonlist()}else s.$message.error(s.$t("m.noson.key3"));else s.$message.error(s.$t("m.wallet.key38"));else s.$message.error(s.$t("m.wallet.key34"))}else s.$message.error(s.$t("m.wallet.key17"))},function(e){console.log(e),s.$message.error(s.$t("m.account.key90"))})},createdson:function(){var s=this;if(this.$set(s.tiptype,0,!1),!this.verifyUsername4(this.add_sons.subusername))return this.add_sons.subusername="",s.$message.error(s.$t("m.sonset.key9"));this.addson=!1,this.removeson=!1,this.add_sons.username=localStorage.getItem("username"),console.log(o()(this.add_sons)),this.add_sons.token=Object(n.a)("token"),this.$ajax("post",this.GLOBAL.baseUrl+"v2/createAccountSub",this.add_sons,function(e){if(1001!=JSON.parse(e).code)if(1002!=JSON.parse(e).code){if(200!==JSON.parse(e).code)return s.$message.error(s.$t("m.account.key97")),console.log(JSON.parse(e)),s.add_sons.subusername="",void s.$set(s.tiptype,0,!0);s.$message.success(s.$t("m.account.key96")),s.$set(s.tiptype,0,!0),s.get_sonlist(),s.add_sons.subusername="",s.$parent.$children[0].getsubusername()}else s.$message.error(s.$t("m.upgrade.key20"));else s.$message.error(s.$t("m.account.key78"))},function(e){console.log(e),s.$message.error(s.$t("m.key"))}),this.pop_type=0},beforeDestroy:function(){this.timer=null}}},r={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"sonset center-box"},[s.tiptype?t("div",{staticClass:"tips",class:s.tiptype[0]?"showtips":""},[s._v(s._s(s.tips_data[0]))]):s._e(),s._v(" "),t("div",{staticClass:"sonset_t"},[t("div",{staticClass:"bottom-box-text_l"},[t("div",{staticClass:"block_box"}),s._v(" "),t("span",[s._v(s._s(s.$t("m.sonset.key1")))])]),s._v(" "),t("div",{staticClass:"add_btn",on:{click:function(e){return s.add_son(1)}}},[t("span",[s._v(s._s(s.$t("m.sonset.key2")))])])]),s._v(" "),t("div",{staticClass:"sonset_main"},[t("ul",{staticClass:"sonset_main_item sonset_m_head"},[t("li",{staticClass:"sonset_list1"},[s._v(s._s(s.sonset_head[0]))]),s._v(" "),t("li",{staticClass:"sonset_list2"},[s._v(s._s(s.sonset_head[1]))]),s._v(" "),t("li",{staticClass:"sonset_list3"},[s._v(s._s(s.sonset_head[2]))]),s._v(" "),t("li",{staticClass:"sonset_list4"},[s._v(s._s(s.sonset_head[3]))]),s._v(" "),t("li",{staticClass:"sonset_list5"},[s._v(s._s(s.sonset_head[4]))]),s._v(" "),t("li",{staticClass:"sonset_list6"},[s._v(s._s(s.sonset_head[5]))])]),s._v(" "),s._l(s.sonset_list,function(e,a){return t("ul",{key:a,staticClass:"sonset_main_item"},[t("li",{staticClass:"sonset_list1"},[s._v(s._s(s.sonset_list[a].name))]),s._v(" "),t("li",{staticClass:"sonset_list2"},[s._v(s._s(s.sonset_list[a].workerNumber))]),s._v(" "),t("li",{staticClass:"sonset_list3"},[s._v(s._s(s.timestampToTime2(s.sonset_list[a].createTime)))]),s._v(" "),t("li",{staticClass:"sonset_list4"},[s.edit_son!==a?t("span",[s._v(s._s(s.sonset_list[a].address))]):s._e(),s._v(" "),s.edit_son==a?t("input",{directives:[{name:"model",rawName:"v-model",value:s.address_paramgs.address,expression:"address_paramgs.address"}],staticClass:"add_adress",attrs:{type:"text",placeholder:s.sonset_inp},domProps:{value:s.address_paramgs.address},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.address_edit(a)},input:function(e){e.target.composing||s.$set(s.address_paramgs,"address",e.target.value)}}}):s._e()]),s._v(" "),t("li",{staticClass:"sonset_list5"},[s.edit_son!==a?t("span",{staticClass:"color1",on:{click:function(e){return s.edit_sons(a)}}},[s._v(s._s(s.$t("m.sonset.key7")))]):s._e(),s._v(" "),s.edit_son==a?t("span",{staticClass:"color1",on:{click:function(e){return s.address_edit(a)}}},[s._v(s._s(s.$t("m.wallet.key19")))]):s._e(),s._v(" "),s.edit_son==a?t("span",{staticClass:"sonset_list5_cancel",on:{click:function(e){return s.cancel_edit()}}},[s._v(s._s(s.$t("m.sonset.key15")))]):s._e()]),s._v(" "),t("li",{staticClass:"sonset_list6 color1",on:{click:function(e){return s.delete_item(a)}}},[s._v(s._s(s.$t("m.sonset.key8")))])])}),s._v(" "),s.subListtype?t("div",{staticClass:"son_tips"},[t("div",{staticClass:"nothing_c"},[s._m(0),s._v(" "),t("div",{staticClass:"nothing_cb"},[s._v(s._s(s.$t("m.account.key54")))])])]):s._e()],2),s._v(" "),0!==this.pop_type?t("div",{staticClass:"share",on:{click:function(e){return e.stopPropagation(),s.remove()}}}):s._e(),s._v(" "),1==this.pop_type?t("div",{staticClass:"add_son"},[t("div",{staticClass:"add_son_t"},[t("span",[s._v(s._s(s.$t("m.sonset.key2")))]),s._v(" "),t("span",{staticClass:"el-icon-close close_add",on:{click:function(e){return s.remove()}}})]),s._v(" "),t("div",{staticClass:"add_con_c"},[t("span",[s._v(s._s(s.$t("m.sonset.key3")))]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.add_sons.subusername,expression:"add_sons.subusername"}],staticClass:"add_inp",attrs:{type:"text",placeholder:s.sonset_inp_0},domProps:{value:s.add_sons.subusername},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.createdson()},input:function(e){e.target.composing||s.$set(s.add_sons,"subusername",e.target.value)}}}),s._v(" "),t("div",{staticClass:"inp_label"},[s._v(s._s(s.$t("m.sonset.key9")))])]),s._v(" "),t("div",{staticClass:"add_son_b"},[t("div",{staticClass:"btn btn_cancel",on:{click:function(e){return s.remove()}}},[s._v(s._s(s.$t("m.sonset.key15")))]),s._v(" "),t("div",{staticClass:"btn btn_click",on:{click:function(e){return s.createdson()}}},[s._v(s._s(s.$t("m.wallet.key19")))])])]):s._e(),s._v(" "),2==this.pop_type?t("div",{staticClass:"add_son remove_son"},[t("div",{staticClass:"add_son_t remove_son_t"},[t("span",[s._v(s._s(s.$t("m.sonset.key8"))+s._s(s.$t("m.sonset.key3")))]),s._v(" "),t("span",{staticClass:"el-icon-close close_add",on:{click:function(e){return s.remove()}}})]),s._v(" "),t("div",{staticClass:"remove_son_c"},[t("div",{staticClass:"flex_c remove_son_c_item"},[t("span",[s._v(s._s(s.$t("m.sonset.key10")))]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.delete_params.paypassword,expression:"delete_params.paypassword"}],staticClass:"add_inp",attrs:{type:"password",placeholder:s.sonset_inp_1},domProps:{value:s.delete_params.paypassword},on:{input:function(e){e.target.composing||s.$set(s.delete_params,"paypassword",e.target.value)}}})]),s._v(" "),t("div",{staticClass:"flex_c remove_son_c_item"},[t("span",[s._v(s._s(s.$t("m.sonset.key12")))]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.delete_params.code,expression:"delete_params.code"}],staticClass:"add_inp",attrs:{type:"text",placeholder:s.sonset_inp_2},domProps:{value:s.delete_params.code},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.delete_son(s.indexs)},input:function(e){e.target.composing||s.$set(s.delete_params,"code",e.target.value)}}}),s._v(" "),t("span",{staticClass:"delete_tips"},[s._v(s._s(s.delete_tips))])])]),s._v(" "),t("div",{staticClass:"add_son_b"},[t("div",{staticClass:"btn btn_cancel",on:{click:function(e){return s.remove()}}},[s._v(s._s(s.$t("m.sonset.key15")))]),s._v(" "),t("div",{staticClass:"btn btn_click",on:{click:function(e){return s.delete_son(s.indexs)}}},[s._v(s._s(s.$t("m.wallet.key19")))])])]):s._e(),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:3==this.pop_type,expression:"this.pop_type==3"}],staticClass:"add_son remove_son"},[t("div",{staticClass:"add_son_t remove_son_t"},[t("span",[s._v(s._s(s.$t("m.wallet.key15")))]),s._v(" "),t("span",{staticClass:"el-icon-close close_add",on:{click:function(e){return s.remove()}}})]),s._v(" "),t("div",{staticClass:"remove_son_c"},[t("div",{staticClass:"flex_c remove_son_c_item"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.address_paramgs.paypassword,expression:"address_paramgs.paypassword"}],staticClass:"add_inp",attrs:{type:"password",placeholder:s.sonset_inp_1,autocomplete:"new-password"},domProps:{value:s.address_paramgs.paypassword},on:{input:function(e){e.target.composing||s.$set(s.address_paramgs,"paypassword",e.target.value)}}})]),s._v(" "),t("div",{staticClass:"flex_c remove_son_c_item"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.address_paramgs.code,expression:"address_paramgs.code"}],staticClass:"add_inp",attrs:{type:"text",placeholder:s.sonset_inp_2},domProps:{value:s.address_paramgs.code},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.get_edit()},input:function(e){e.target.composing||s.$set(s.address_paramgs,"code",e.target.value)}}})])]),s._v(" "),t("div",{staticClass:"add_son_b"},[t("div",{staticClass:"btn btn_cancel",on:{click:function(e){return s.remove()}}},[s._v(s._s(s.$t("m.sonset.key15")))]),s._v(" "),t("div",{staticClass:"btn btn_click",on:{click:function(e){return s.get_edit()}}},[s._v(s._s(s.$t("m.wallet.key19")))])])]),s._v(" "),s.loading?t("div",{staticClass:"loading"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:s.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":s.$t("m.account.key55"),"element-loading-spinner":"el-icon-loading"}})],1):s._e()])},staticRenderFns:[function(){var s=this.$createElement,e=this._self._c||s;return e("div",[e("img",{attrs:{src:t("Q95m"),alt:""}})])}]};var d=t("VU/8")(i,r,!1,function(s){t("UP+S")},"data-v-12f33804",null);e.default=d.exports}});
//# sourceMappingURL=13.73f13f1afd58e254f7a2.js.map